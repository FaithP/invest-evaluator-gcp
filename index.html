<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Faith Peterson">
    <meta name="description" content="INVEST Requirements Evaluator - AI-augmented product management demo">
    <meta name="keywords" content="product management, requirements, INVEST criteria, AI prototyping">
    <meta name="created" content="2025-07-30">
    <title>INVEST Requirements Evaluator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        /*
         * INVEST Requirements Evaluator
         * Author: Faith Peterson
         * Created: July 29-30, 2025
         * 
         * Demonstrates AI-augmented product management and rapid prototyping
         * capabilities. Uses pre-computed examples to showcase INVEST criteria
         * evaluation for software requirements.
         * 
         * License: CC BY 4.0 (https://creativecommons.org/licenses/by/4.0/)
         * Portfolio piece - feel free to reference with attribution
         */
        
        // App state
        let state = {
            inputText: '',
            isAnalyzing: false,
            currentStep: 'input',
            identifiedRequirements: [],
            confirmedRequirements: [],
            evaluationResults: [],
            error: '',
            progressStatus: '',
            selectedDemo: ''
        };

        const investCriteria = {
            Independent: "Can be developed without dependencies on other requirements",
            Negotiable: "Details can be discussed and refined with stakeholders", 
            Valuable: "Provides clear business or user value",
            Estimable: "Can be reasonably estimated for effort/complexity",
            Small: "Can be completed within a single iteration/sprint",
            Testable: "Has clear acceptance criteria that can be verified"
        };

        const demoExamples = {
            clean: {
                title: "Well-Written User Stories",
                text: `As a returning customer, I want to save my payment information securely so that I can complete future purchases faster.

As a project manager, I want to receive email notifications when task deadlines are approaching so that I can follow up with team members.

As a mobile app user, I want to enable biometric login so that I can access my account quickly and securely.`,
                requirements: [
                    {id: 1, text: "As a returning customer, I want to save my payment information securely so that I can complete future purchases faster.", type: "user story"},
                    {id: 2, text: "As a project manager, I want to receive email notifications when task deadlines are approaching so that I can follow up with team members.", type: "user story"},
                    {id: 3, text: "As a mobile app user, I want to enable biometric login so that I can access my account quickly and securely.", type: "user story"}
                ],
                evaluations: [
                    {
                        requirement: {id: 1, text: "As a returning customer, I want to save my payment information securely so that I can complete future purchases faster.", type: "user story"},
                        evaluation: {
                            overall_score: "pass",
                            criteria: {
                                Independent: {score: "pass", reasoning: "Payment storage feature can be developed independently of other checkout features.", improvement: ""},
                                Negotiable: {score: "pass", reasoning: "Security levels, stored data fields, and user interface can be refined with stakeholders.", improvement: ""},
                                Valuable: {score: "pass", reasoning: "Clear customer value - reduces friction and improves conversion rates.", improvement: ""},
                                Estimable: {score: "pass", reasoning: "Well-understood feature with established patterns and security requirements.", improvement: ""},
                                Small: {score: "pass", reasoning: "Core functionality can be delivered within a single development cycle.", improvement: ""},
                                Testable: {score: "pass", reasoning: "Clear success criteria - payment info is saved securely and checkout is faster.", improvement: ""}
                            }
                        }
                    },
                    {
                        requirement: {id: 2, text: "As a project manager, I want to receive email notifications when task deadlines are approaching so that I can follow up with team members.", type: "user story"},
                        evaluation: {
                            overall_score: "pass",
                            criteria: {
                                Independent: {score: "pass", reasoning: "Notification system can be built independently of other project management features.", improvement: ""},
                                Negotiable: {score: "pass", reasoning: "Timing, frequency, and notification content can be discussed and customized.", improvement: ""},
                                Valuable: {score: "pass", reasoning: "Helps project managers proactively manage deadlines and team accountability.", improvement: ""},
                                Estimable: {score: "pass", reasoning: "Standard background job with email integration - well-understood complexity.", improvement: ""},
                                Small: {score: "pass", reasoning: "Can be implemented as a focused feature in one iteration.", improvement: ""},
                                Testable: {score: "pass", reasoning: "Can verify notifications are sent at correct times with proper content.", improvement: ""}
                            }
                        }
                    },
                    {
                        requirement: {id: 3, text: "As a mobile app user, I want to enable biometric login so that I can access my account quickly and securely.", type: "user story"},
                        evaluation: {
                            overall_score: "pass",
                            criteria: {
                                Independent: {score: "pass", reasoning: "Biometric authentication can be added independently of other login methods.", improvement: ""},
                                Negotiable: {score: "pass", reasoning: "Supported biometric types and fallback options can be refined.", improvement: ""},
                                Valuable: {score: "pass", reasoning: "Improves user experience while maintaining security standards.", improvement: ""},
                                Estimable: {score: "pass", reasoning: "Leverages platform APIs with known implementation patterns.", improvement: ""},
                                Small: {score: "pass", reasoning: "Self-contained feature that can be completed in one development cycle.", improvement: ""},
                                Testable: {score: "pass", reasoning: "Can test successful authentication and proper fallback behavior.", improvement: ""}
                            }
                        }
                    }
                ]
            },
            poor: {
                title: "Poorly Written Requirements",
                text: `The application must be intuitive and easy to use for all users.

Implement better security across the entire platform.

Make sure the system performs well under heavy load and scales appropriately.`,
                requirements: [
                    {id: 1, text: "The application must be intuitive and easy to use for all users.", type: "functional requirement"},
                    {id: 2, text: "Implement better security across the entire platform.", type: "functional requirement"},
                    {id: 3, text: "Make sure the system performs well under heavy load and scales appropriately.", type: "functional requirement"}
                ],
                evaluations: [
                    {
                        requirement: {id: 1, text: "The application must be intuitive and easy to use for all users.", type: "functional requirement"},
                        evaluation: {
                            overall_score: "fail",
                            criteria: {
                                Independent: {score: "fail", reasoning: "Too broad to determine specific dependencies or implementation scope.", improvement: "Define specific UI improvements or user tasks to optimize"},
                                Negotiable: {score: "fail", reasoning: "No concrete aspects to negotiate - 'intuitive' and 'easy' are subjective.", improvement: "Specify measurable usability goals and target user behaviors"},
                                Valuable: {score: "partial", reasoning: "Usability is valuable but the requirement is too vague to assess impact.", improvement: "Define specific user problems this addresses"},
                                Estimable: {score: "fail", reasoning: "Could require anything from minor UI tweaks to complete redesign.", improvement: "Break into specific usability improvements with defined scope"},
                                Small: {score: "fail", reasoning: "Making entire application intuitive could take months or years.", improvement: "Focus on specific user flows or interface elements"},
                                Testable: {score: "fail", reasoning: "No measurable criteria for 'intuitive' or 'easy to use'.", improvement: "Define specific usability metrics like task completion time or user satisfaction scores"}
                            }
                        }
                    },
                    {
                        requirement: {id: 2, text: "Implement better security across the entire platform.", type: "functional requirement"},
                        evaluation: {
                            overall_score: "fail",
                            criteria: {
                                Independent: {score: "fail", reasoning: "Platform-wide security changes likely affect multiple systems and features.", improvement: "Identify specific security vulnerabilities or compliance requirements"},
                                Negotiable: {score: "fail", reasoning: "No specific security measures defined to discuss or refine.", improvement: "Specify which security aspects need improvement and to what standards"},
                                Valuable: {score: "pass", reasoning: "Security improvements are clearly valuable for protecting users and data.", improvement: ""},
                                Estimable: {score: "fail", reasoning: "Could range from password policies to complete infrastructure overhaul.", improvement: "Define specific security controls and compliance requirements"},
                                Small: {score: "fail", reasoning: "Platform-wide security improvements are typically large, complex efforts.", improvement: "Break into specific security enhancements like authentication, encryption, or audit logging"},
                                Testable: {score: "fail", reasoning: "No criteria for what constitutes 'better security'.", improvement: "Define specific security tests, compliance standards, or vulnerability thresholds"}
                            }
                        }
                    },
                    {
                        requirement: {id: 3, text: "Make sure the system performs well under heavy load and scales appropriately.", type: "functional requirement"},
                        evaluation: {
                            overall_score: "fail",
                            criteria: {
                                Independent: {score: "partial", reasoning: "Performance work may be independent but scaling often requires infrastructure changes.", improvement: "Separate performance optimization from scaling infrastructure requirements"},
                                Negotiable: {score: "fail", reasoning: "No specific performance targets or scaling requirements to negotiate.", improvement: "Define specific load requirements and performance thresholds"},
                                Valuable: {score: "pass", reasoning: "Performance and scalability are important for user experience and business growth.", improvement: ""},
                                Estimable: {score: "fail", reasoning: "Cannot estimate without knowing current performance or target load.", improvement: "Specify current load, target load, and acceptable performance metrics"},
                                Small: {score: "fail", reasoning: "System-wide performance and scaling work is typically a large effort.", improvement: "Focus on specific performance bottlenecks or scaling constraints"},
                                Testable: {score: "fail", reasoning: "No definition of 'heavy load' or 'performs well'.", improvement: "Define specific load scenarios and performance benchmarks"}
                            }
                        }
                    }
                ]
            },
            narrative: {
                title: "Business Context Narrative",
                text: `Our e-commerce platform is losing customers during checkout. Analytics show that 65% of users abandon their cart at the payment step. Customer service reports that users complain about having to re-enter shipping information and not being able to see total costs including tax and shipping until the final step. Additionally, our mobile checkout process requires users to zoom and scroll extensively, making it difficult to complete purchases on phones. We need to streamline the checkout experience to reduce abandonment and increase conversions.`,
                requirements: [
                    {id: 1, text: "Users should be able to see total costs including tax and shipping before the final payment step", type: "user story"},
                    {id: 2, text: "The system should remember and pre-populate shipping information for returning customers", type: "functional requirement"},
                    {id: 3, text: "Mobile checkout process should be optimized to eliminate excessive zooming and scrolling", type: "functional requirement"},
                    {id: 4, text: "Checkout flow should be streamlined to reduce the current 65% cart abandonment rate", type: "functional requirement"}
                ],
                evaluations: [
                    {
                        requirement: {id: 1, text: "Users should be able to see total costs including tax and shipping before the final payment step", type: "user story"},
                        evaluation: {
                            overall_score: "pass",
                            criteria: {
                                Independent: {score: "pass", reasoning: "Cost calculation display can be implemented independently of other checkout features.", improvement: ""},
                                Negotiable: {score: "pass", reasoning: "Timing of display, cost breakdown detail, and presentation can be refined.", improvement: ""},
                                Valuable: {score: "pass", reasoning: "Addresses specific customer complaint and likely reduces cart abandonment.", improvement: ""},
                                Estimable: {score: "pass", reasoning: "Standard e-commerce feature with known implementation patterns.", improvement: ""},
                                Small: {score: "pass", reasoning: "Can be delivered as a focused improvement to existing checkout flow.", improvement: ""},
                                Testable: {score: "pass", reasoning: "Can verify that total costs appear before payment step and are accurate.", improvement: ""}
                            }
                        }
                    },
                    {
                        requirement: {id: 2, text: "The system should remember and pre-populate shipping information for returning customers", type: "functional requirement"},
                        evaluation: {
                            overall_score: "partial",
                            criteria: {
                                Independent: {score: "pass", reasoning: "Address storage and retrieval can be implemented independently.", improvement: ""},
                                Negotiable: {score: "pass", reasoning: "Data retention policies, opt-in preferences, and security measures can be discussed.", improvement: ""},
                                Valuable: {score: "pass", reasoning: "Reduces friction for returning customers and addresses user complaints.", improvement: ""},
                                Estimable: {score: "partial", reasoning: "Effort depends on existing user account system and data storage architecture.", improvement: "Clarify integration with current user management and privacy compliance requirements"},
                                Small: {score: "pass", reasoning: "Core functionality can be delivered in one development cycle.", improvement: ""},
                                Testable: {score: "partial", reasoning: "Needs specific criteria for data accuracy and privacy handling.", improvement: "Define what information is stored, retention period, and user control options"}
                            }
                        }
                    }
                ]
            },
            fiction: {
                title: "Literary Prose (No Requirements)",
                text: `The autumn wind whispered through the ancient oak trees, carrying with it the scent of fallen leaves and distant woodsmoke. Margaret pulled her woolen coat tighter as she walked along the cobblestone path, her footsteps echoing softly in the crisp morning air. The village lay quiet beneath a blanket of golden mist, with only the occasional bark of a dog or the gentle lowing of cattle to break the peaceful silence.`,
                requirements: [],
                evaluations: []
            }
        };

        // Simple icons (SVG strings)
        const icons = {
            search: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>',
            checkCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22,4 12,14.01 9,11.01"/></svg>',
            xCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',
            alertCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',
            loader: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon animate-spin"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>'
        };

        // Helper functions
        function setState(newState) {
            state = { ...state, ...newState };
            render();
        }

        function getScoreIcon(score) {
            switch(score) {
                case 'pass': return `<span class="text-green-600">${icons.checkCircle}</span>`;
                case 'partial': return `<span class="text-yellow-600">${icons.alertCircle}</span>`;
                case 'fail': return `<span class="text-red-600">${icons.xCircle}</span>`;
                default: return '';
            }
        }

        function getScoreColor(score) {
            switch(score) {
                case 'pass': return 'text-green-800 bg-green-100';
                case 'partial': return 'text-yellow-800 bg-yellow-100';
                case 'fail': return 'text-red-800 bg-red-100';
                default: return 'text-gray-800 bg-gray-100';
            }
        }

        // Actions
        function selectDemo(key) {
            const demo = demoExamples[key];
            setState({
                selectedDemo: key,
                inputText: demo.text,
                error: ''
            });
        }

        function analyzeText() {
            if (!state.selectedDemo) {
                setState({ error: 'Please select a demo example' });
                return;
            }

            const demo = demoExamples[state.selectedDemo];
            if (demo.requirements.length === 0) {
                setState({ 
                    error: 'No recognizable requirements found in the provided text. Please provide text containing user stories, functional requirements, or acceptance criteria.' 
                });
                return;
            }
            
            setState({
                identifiedRequirements: demo.requirements,
                confirmedRequirements: demo.requirements.map(req => ({ ...req, confirmed: true })),
                currentStep: 'requirements',
                error: ''
            });
        }

        function toggleRequirement(id) {
            const updated = state.confirmedRequirements.map(req => 
                req.id === id ? { ...req, confirmed: !req.confirmed } : req
            );
            setState({ confirmedRequirements: updated });
        }

        function evaluateRequirements() {
            const requirementsToEvaluate = state.confirmedRequirements.filter(req => req.confirmed);
            
            if (requirementsToEvaluate.length === 0) {
                setState({ error: 'Please confirm at least one requirement to evaluate.' });
                return;
            }

            if (!state.selectedDemo) {
                setState({ error: 'Demo example required for evaluation.' });
                return;
            }

            const demo = demoExamples[state.selectedDemo];
            const selectedEvaluations = demo.evaluations.filter(eval => 
                requirementsToEvaluate.some(req => req.id === eval.requirement.id)
            );
            
            setState({
                isAnalyzing: true,
                progressStatus: 'Loading demo evaluation results...',
                error: ''
            });
            
            setTimeout(() => {
                setState({
                    evaluationResults: selectedEvaluations,
                    currentStep: 'evaluation',
                    isAnalyzing: false,
                    progressStatus: ''
                });
            }, 1500);
        }

        function resetTool() {
            setState({
                inputText: '',
                currentStep: 'input',
                identifiedRequirements: [],
                confirmedRequirements: [],
                evaluationResults: [],
                error: '',
                progressStatus: '',
                selectedDemo: ''
            });
        }

        // Render function
        function render() {
            const root = document.getElementById('root');
            
            let html = `
            <div class="max-w-4xl mx-auto p-6 bg-white">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">INVEST Requirements Evaluator</h1>
                    <p class="text-gray-600 mb-4">
                        Analyze text for software requirements and evaluate them against INVEST criteria for quality assessment.
                    </p>
                    
                    <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-blue-800 font-medium">Demo Mode</span>
                        </div>
                        <p class="text-blue-700 text-sm">
                            This demonstration uses pre-computed examples to showcase the INVEST evaluation process. 
                            Select an example below to see how the tool analyzes different types of requirements.
                        </p>
                    </div>
                </div>

                ${state.error ? `
                <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg">
                    <p class="text-red-800">${state.error}</p>
                </div>
                ` : ''}

                ${renderCurrentStep()}

                <div class="mt-12 pt-6 border-t border-gray-400">
                    <p class="text-sm text-gray-600 text-center">
                        Licensed under 
                        <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 underline">
                            Creative Commons CC BY 4.0
                        </a>
                    </p>
                </div>
            </div>
            `;
            
            root.innerHTML = html;
        }

        function renderCurrentStep() {
            if (state.currentStep === 'input') {
                return `
                <div class="space-y-6">
                    <div class="mb-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-3">Select a Demo Example:</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${Object.entries(demoExamples).map(([key, demo]) => `
                                <button onclick="selectDemo('${key}')" class="p-4 text-left border rounded-lg hover:bg-gray-50 transition-colors ${
                                    state.selectedDemo === key ? 'border-blue-500 bg-blue-50' : 'border-gray-200'
                                }">
                                    <h4 class="font-medium text-gray-900">${demo.title}</h4>
                                    <p class="text-sm text-gray-600 mt-1">
                                        ${demo.text.substring(0, 100)}...
                                    </p>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div>
                        <label for="text-input" class="block text-sm font-medium text-gray-700 mb-2">
                            Selected Example Text:
                        </label>
                        <textarea id="text-input" readonly class="w-full h-40 p-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700">${state.inputText}</textarea>
                    </div>
                    
                    <button onclick="analyzeText()" ${!state.selectedDemo ? 'disabled' : ''} class="flex items-center gap-2 px-6 py-3 rounded-lg transition-colors ${
                        !state.selectedDemo
                            ? 'bg-gray-400 cursor-not-allowed' 
                            : 'bg-blue-600 hover:bg-blue-700 cursor-pointer'
                    } text-white">
                        ${icons.search}
                        Analyze Selected Example
                    </button>
                    
                    ${!state.selectedDemo ? '<p class="text-sm text-gray-600">Please select an example above to continue</p>' : ''}
                </div>
                `;
            }
            
            if (state.currentStep === 'requirements') {
                return `
                <div class="space-y-6">
                    <div>
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Identified Requirements</h2>
                        <p class="text-gray-600 mb-4">
                            Review the requirements found in your text. Uncheck any that aren't actual requirements:
                        </p>
                    </div>

                    <div class="space-y-4">
                        ${state.confirmedRequirements.map(req => `
                            <div class="flex items-start gap-3 p-4 border border-gray-200 rounded-lg">
                                <input type="checkbox" ${req.confirmed ? 'checked' : ''} onchange="toggleRequirement(${req.id})" class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-sm font-medium text-gray-500">#${req.id}</span>
                                        <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded">${req.type}</span>
                                    </div>
                                    <p class="text-gray-900">${req.text}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="flex gap-4">
                        <button onclick="evaluateRequirements()" ${state.isAnalyzing || state.confirmedRequirements.filter(req => req.confirmed).length === 0 ? 'disabled' : ''} class="flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed">
                            ${state.isAnalyzing ? icons.loader : icons.checkCircle}
                            ${state.isAnalyzing ? 'Evaluating...' : 'Evaluate Selected Requirements'}
                        </button>
                        
                        <button onclick="resetTool()" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">Start Over</button>
                    </div>

                    ${state.isAnalyzing && state.progressStatus ? `
                    <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-blue-600">${icons.loader}</span>
                            <span class="text-blue-800 font-medium">Analysis in Progress</span>
                        </div>
                        <p class="text-blue-700 text-sm">${state.progressStatus}</p>
                    </div>
                    ` : ''}
                </div>
                `;
            }
            
            if (state.currentStep === 'evaluation') {
                return `
                <div class="space-y-8">
                    <div class="flex items-center justify-between">
                        <h2 class="text-xl font-semibold text-gray-900">INVEST Evaluation Results</h2>
                        <button onclick="resetTool()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">Analyze New Example</button>
                    </div>

                    ${state.evaluationResults.map((result, idx) => `
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="mb-4">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-sm font-medium text-gray-500">Requirement #${result.requirement.id}</span>
                                    <span class="px-3 py-1 text-sm rounded-full ${getScoreColor(result.evaluation.overall_score)}">
                                        Overall: ${result.evaluation.overall_score.toUpperCase()}
                                    </span>
                                </div>
                                <p class="text-gray-900 font-medium">${result.requirement.text}</p>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${Object.entries(result.evaluation.criteria).map(([criterion, details]) => `
                                    <div class="border border-gray-100 rounded-lg p-4">
                                        <div class="flex items-center gap-2 mb-2">
                                            ${getScoreIcon(details.score)}
                                            <h4 class="font-medium text-gray-900">${criterion}</h4>
                                            <span class="px-2 py-1 text-xs rounded ${getScoreColor(details.score)}">${details.score}</span>
                                        </div>
                                        
                                        <p class="text-sm text-gray-600 mb-2">${investCriteria[criterion]}</p>
                                        <p class="text-sm text-gray-800 mb-2">${details.reasoning}</p>
                                        
                                        ${details.improvement && details.score !== 'pass' ? `
                                        <div class="text-sm text-blue-800 bg-blue-50 p-2 rounded">
                                            <strong>Improvement:</strong> ${details.improvement}
                                        </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                `;
            }
            
            return '';
        }

        // Initialize the app
        window.addEventListener('load', function() {
            render();
        });
    </script>
</body>
</html>